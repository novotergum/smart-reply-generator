<!doctype html>
<html lang="de">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Smart Reply Generator für Bewertungen</title>
<style>
body{font-family:system-ui,Segoe UI,sans-serif;background:#f3f4f6;margin:0;padding:20px;}
.container{max-width:800px;margin:auto;background:#fff;padding:24px;border-radius:12px;box-shadow:0 4px 20px rgba(0,0,0,.08);}
h1{margin-top:0;}
textarea,input,select{width:100%;padding:10px;margin-top:4px;border:1px solid #d1d5db;border-radius:8px;}
button{border:0;border-radius:20px;padding:10px 16px;cursor:pointer;}
.btn-primary{background:#ff6600;color:#fff;}
.btn-secondary{background:#e5e7eb;}
.reply{margin-top:16px;padding:12px;background:#f9fafb;border-radius:8px;}
</style>
</head>
<body>
<div class="container">
<h1>Smart Reply Generator für Bewertungen</h1>
<form method="post" action="/generate">
<input type="hidden" name="rid" value="{{ rid or '' }}">
<div class="field">
<label for="review_0">Bewertungstext</label>
<textarea id="review_0" name="review">{{ reviews[0].review or '' }}</textarea>
</div>
<div class="field">
<label for="rating_0">Bewertung (1–5 Sterne)</label>
<select id="rating_0" name="rating">
<option value="">–</option>
{% for n in range(1,6) %}
<option value="{{n}}" {% if (reviews[0].rating or '')==n|string %}selected{% endif %}>{{n}} Sterne</option>
{% endfor %}
</select>
</div>
<div class="field">
<label>Tonfall</label>
<select name="selectedTone">
<option value="friendly">Freundlich & nahbar</option>
<option value="neutral">Neutral</option>
</select>
</div>
<div class="field">
<label>Signatur</label>
<input name="corporateSignature" value="Ihr NOVOTERGUM Team">
</div>
<button class="btn-primary">Antwortvorschläge erzeugen</button>
</form>

{% if replies %}
<h2>Antwortvorschläge</h2>
{% for r in replies %}
<div class="reply">
<b>Bewertung {{loop.index}}</b><br><pre>{{r.review}}</pre>
<textarea rows="6" readonly>{{r.reply}}</textarea>
{% if r.insights %}
<details><summary>Interne Insights</summary><pre>{{r.insights | tojson(indent=2)}}</pre></details>
{% endif %}
</div>
{% endfor %}
{% endif %}
</div>
</body>
</html>
