<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <title>Smart Reply Generator für Bewertungen</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
        body {
          font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
          margin: 0;
          padding: 0;
          background: #f5f5f5;
        }
        .container {
          max-width: 800px;
          margin: 24px auto;
          padding: 16px;
          background: #ffffff;
          border-radius: 8px;
          box-shadow: 0 2px 6px rgba(0,0,0,0.06);
        }
        h1 {
          font-size: 1.4rem;
          margin-bottom: 0.25rem;
        }
        .subtitle {
          font-size: 0.9rem;
          color: #555;
          margin-bottom: 1.5rem;
        }
        .field {
          margin-bottom: 1.2rem;
        }
        label {
          display: block;
          font-weight: 600;
          margin-bottom: 0.3rem;
          font-size: 0.9rem;
        }
        textarea {
          width: 100%;
          min-height: 140px;
          padding: 8px;
          border-radius: 4px;
          border: 1px solid #ccc;
          font: inherit;
          resize: vertical;
        }
        select, input[type="text"], input[type="email"] {
          width: 100%;
          padding: 8px;
          border-radius: 4px;
          border: 1px solid #ccc;
          font: inherit;
        }
        button {
          display: inline-block;
          padding: 10px 16px;
          border-radius: 4px;
          border: none;
          cursor: pointer;
          font-weight: 600;
          font-size: 0.95rem;
          background: #ff7a00;
          color: #ffffff;
        }
        button:hover {
          opacity: 0.9;
        }
        .output {
          margin-top: 2rem;
          padding-top: 1.5rem;
          border-top: 1px solid #eee;
        }
        .output h2 {
          font-size: 1.1rem;
          margin-bottom: 0.8rem;
        }
        pre {
          white-space: pre-wrap;
          word-wrap: break-word;
          background: #fafafa;
          border-radius: 4px;
          padding: 12px;
          border: 1px solid #eee;
          font-size: 0.95rem;
        }
        .hint {
          font-size: 0.8rem;
          color: #777;
        }
    </style>
</head>
<body>
<div class="container">
    {% set v = values or {} %}

    <h1>Smart Reply Generator für Bewertungen</h1>
    <p class="subtitle">
        Füge eine Google- oder Portalbewertung ein und erhalte einen fertigen Antwortvorschlag im NOVOTERGUM-Stil.
    </p>

    <form method="post" action="/generate">
        <div class="field">
            <label for="review">Bewertungstext</label>
            <textarea
                id="review"
                name="review"
                placeholder="Füge hier die Originalbewertung ein …"
                required
            >{{ v.get("review", "") }}</textarea>
        </div>

        <div class="field">
            <label for="ratingStars">Bewertung (Anzahl Sterne)</label>
            {% set stars = v.get("ratingStars", "") %}
            <select id="ratingStars" name="ratingStars">
                <option value="">– bitte auswählen –</option>
                <option value="5" {% if stars == "5" %}selected{% endif %}>5 Sterne</option>
                <option value="4" {% if stars == "4" %}selected{% endif %}>4 Sterne</option>
                <option value="3" {% if stars == "3" %}selected{% endif %}>3 Sterne</option>
                <option value="2" {% if stars == "2" %}selected{% endif %}>2 Sterne</option>
                <option value="1" {% if stars == "1" %}selected{% endif %}>1 Stern</option>
            </select>
            <div class="hint">
                Die Anzahl der Sterne hilft, die Antwortstrategie (positiv, neutral, kritisch) passend zu wählen.
            </div>
        </div>

        <div class="field">
            <label for="selectedTone">Tonfall der Antwort</label>
            {% set tone = v.get("selectedTone", "friendly") %}
            <select id="selectedTone" name="selectedTone">
                <option value="warm" {% if tone == "warm" %}selected{% endif %}>Warm &amp; empathisch</option>
                <option value="friendly" {% if tone == "friendly" %}selected{% endif %}>Freundlich &amp; nahbar</option>
                <option value="neutral" {% if tone == "neutral" %}selected{% endif %}>Neutral &amp; sachlich</option>
                <option value="professional" {% if tone == "professional" %}selected{% endif %}>Formell &amp; professionell</option>
                <option value="casual" {% if tone == "casual" %}selected{% endif %}>Locker &amp; informell</option>
            </select>
        </div>

        <div class="field">
            <label for="reviewTag">Art der Bewertung</label>
            {% set tag = v.get("reviewTag", "") %}
            <select id="reviewTag" name="reviewTag">
                <option value="">– optional, zur besseren Einordnung –</option>
                <option value="Allgemeines Feedback" {% if tag == "Allgemeines Feedback" %}selected{% endif %}>
                    Allgemeines Feedback
                </option>
                <option value="Therapie/Behandlung" {% if tag == "Therapie/Behandlung" %}selected{% endif %}>
                    Therapie / Behandlung
                </option>
                <option value="Kritische Inhalte" {% if tag == "Kritische Inhalte" %}selected{% endif %}>
                    Kritische Inhalte
                </option>
            </select>
        </div>

        <div class="field">
            <label for="anrede">Anrede (optional)</label>
            <input
                type="text"
                id="anrede"
                name="anrede"
                placeholder='z.&nbsp;B. "Liebe Frau Müller," oder "Guten Tag,"'
                value="{{ v.get('anrede', '') }}"
            />
        </div>

        <div class="field">
            <label for="corporateSignature">Signatur</label>
            <input
                type="text"
                id="corporateSignature"
                name="corporateSignature"
                placeholder='z.&nbsp;B. "Ihr NOVOTERGUM Team Duisburg"'
                value="{{ v.get('corporateSignature', 'Ihr NOVOTERGUM Team') }}"
            />
        </div>

        <div class="field">
            <label for="kontaktMail">Kontakt-E-Mail (optional)</label>
            <input
                type="email"
                id="kontaktMail"
                name="kontaktMail"
                placeholder="z. B. duisburg@novotergum.de"
                value="{{ v.get('kontaktMail', '') }}"
            />
            <div class="hint">
                Wird vor allem bei kritischen Bewertungen genutzt, um einen direkten Kontakt anzubieten.
            </div>
        </div>

        <!-- Sprache wird im Backend auf 'de' gesetzt, daher kein Feld nötig -->

        <button type="submit">Antwortvorschlag erzeugen</button>
    </form>

    {% if reply %}
        <div class="output">
            <h2>Antwortvorschlag</h2>
            <pre>{{ reply }}</pre>
        </div>
    {% endif %}
</div>
</body>
</html>
